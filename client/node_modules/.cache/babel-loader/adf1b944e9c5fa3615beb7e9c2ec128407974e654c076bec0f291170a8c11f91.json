{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\monty\\\\OneDrive\\\\\\u30C9\\u30AD\\u30E5\\u30E1\\u30F3\\u30C8\\\\OpenSupplementsInitiative\\\\client\\\\src\\\\pages\\\\SupplementForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { Container, Typography, Stepper, Step, StepLabel, Box, Button, Paper, Alert, CircularProgress } from '@mui/material';\nimport { useAuth } from '../contexts/AuthContext';\nimport api from '../utils/api';\nimport BasicInfoStep from '../components/submission/BasicInfoStep';\nimport IngredientsStep from '../components/submission/IngredientsStep';\nimport HealthClaimsStep from '../components/submission/HealthClaimsStep';\nimport DocumentsStep from '../components/submission/DocumentsStep';\nimport ReviewStep from '../components/submission/ReviewStep';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst steps = ['Basic Information', 'Ingredients & Suppliers', 'Health Claims & Evidence', 'Supporting Documents', 'Review & Submit'];\nconst SupplementForm = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    user\n  } = useAuth();\n  const [activeStep, setActiveStep] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [isDraft, setIsDraft] = useState(true);\n\n  // Form data state following OSI schema structure\n  const [formData, setFormData] = useState({\n    // Basic product information\n    artgEntry: {\n      artgNumber: '',\n      productName: '',\n      alternateNames: [],\n      sponsor: '',\n      postalAddress: '',\n      productCategory: 'Medicine',\n      status: 'Draft'\n    },\n    products: [{\n      productName: '',\n      alternateNames: [],\n      productType: 'Single Medicine Product',\n      effectiveDate: new Date().toISOString().split('T')[0]\n    }],\n    permittedIndications: [],\n    indicationRequirements: [],\n    warnings: [],\n    dosageInformation: {\n      adults: '',\n      children: '',\n      generalNotes: ''\n    },\n    allergenInformation: {\n      containsAllergens: [],\n      freeOfClaims: [],\n      allergenStatement: '',\n      crossContaminationRisk: null\n    },\n    additionalProductInformation: {\n      packSizeInformation: {\n        packSize: '',\n        poisonSchedule: ''\n      }\n    },\n    components: [{\n      formulation: 'Primary',\n      dosageForm: '',\n      routeOfAdministration: '',\n      visualIdentification: '',\n      activeIngredients: [],\n      excipients: []\n    }],\n    clinicalTrials: [],\n    evidenceRegulatorySummary: {\n      overallEvidenceStatement: '',\n      keyRegulatoryPoints: [],\n      evidenceGradingSystemUsed: '',\n      references: []\n    },\n    interactions: [],\n    contraindicationsAdverseEffects: {\n      contraindications: [],\n      adverseEffects: []\n    },\n    intendedPopulation: {\n      primaryTargetGroups: [],\n      ageRange: {\n        minAge: null,\n        maxAge: null,\n        unit: 'years'\n      },\n      sex: 'Any',\n      specificConsiderations: ''\n    },\n    storageShelfLife: {\n      storageConditions: '',\n      shelfLifeMonths: null,\n      useByInstructions: '',\n      batchNumberFormat: '',\n      expiryDateFormat: ''\n    },\n    productIdentifiers: [],\n    documentInformation: {\n      dataEntrySource: 'Manufacturer Submission',\n      dataEntryDate: new Date().toISOString().split('T')[0],\n      version: '0.2.0',\n      notes: ''\n    },\n    // Additional fields for submission tracking\n    submissionMetadata: {\n      submittedBy: (user === null || user === void 0 ? void 0 : user.id) || '',\n      organizationId: (user === null || user === void 0 ? void 0 : user.organizationId) || '',\n      status: 'draft',\n      lastSaved: null,\n      submittedAt: null\n    }\n  });\n\n  // Load existing supplement data if editing\n  useEffect(() => {\n    if (id && id !== 'new') {\n      loadSupplementData(id);\n    }\n  }, [id]);\n  const loadSupplementData = async supplementId => {\n    try {\n      setLoading(true);\n      const response = await api.get(`/supplements/${supplementId}`);\n      const data = response.data.supplement;\n      setFormData(data.osi_data || data);\n      setIsDraft(data.status === 'draft');\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error('Error loading supplement data:', err);\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || 'Error loading supplement data');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleNext = () => {\n    setActiveStep(prevActiveStep => prevActiveStep + 1);\n  };\n  const handleBack = () => {\n    setActiveStep(prevActiveStep => prevActiveStep - 1);\n  };\n  const handleStepClick = step => {\n    setActiveStep(step);\n  };\n  const updateFormData = (section, data) => {\n    setFormData(prev => ({\n      ...prev,\n      [section]: data\n    }));\n  };\n  const saveDraft = async () => {\n    try {\n      setLoading(true);\n\n      // Prepare data for draft submission - make it more lenient\n      const draftData = {\n        ...formData,\n        // Ensure required fields have default values for draft\n        artgEntry: {\n          ...formData.artgEntry,\n          artgNumber: formData.artgEntry.artgNumber || 'DRAFT-' + Date.now(),\n          status: 'Draft'\n        },\n        // Convert warnings objects to strings for schema compliance\n        warnings: formData.warnings.map(w => typeof w === 'object' ? w.text : w),\n        // Ensure components have proper structure\n        components: formData.components.map(comp => ({\n          ...comp,\n          activeIngredients: comp.activeIngredients.map(ing => ({\n            ...ing,\n            // Convert quantity object to string for schema compliance\n            quantity: typeof ing.quantity === 'object' ? `${ing.quantity.value} ${ing.quantity.unit}` : ing.quantity,\n            // Remove equivalentTo if it's null or empty\n            ...(ing.equivalentTo && ing.equivalentTo.substance ? {\n              equivalentTo: `${ing.equivalentTo.value} ${ing.equivalentTo.unit} ${ing.equivalentTo.substance}`\n            } : {})\n          }))\n        })),\n        submissionMetadata: {\n          ...formData.submissionMetadata,\n          lastSaved: new Date().toISOString(),\n          status: 'draft'\n        }\n      };\n      let response;\n      if (id && id !== 'new') {\n        response = await api.put(`/supplements/${id}`, {\n          osiData: draftData\n        });\n      } else {\n        response = await api.post('/supplements', draftData);\n      }\n      setSuccess('Draft saved successfully');\n      if (!id || id === 'new') {\n        navigate(`/supplement/${response.data.id}/edit`);\n      }\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      console.error('Save draft error:', err);\n      setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || 'Error saving draft');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const submitForReview = async () => {\n    try {\n      setLoading(true);\n      const payload = {\n        ...formData,\n        submissionMetadata: {\n          ...formData.submissionMetadata,\n          submittedAt: new Date().toISOString(),\n          status: 'submitted'\n        }\n      };\n      if (id && id !== 'new') {\n        await api.post(`/supplements/${id}/submit`);\n      } else {\n        await api.post('/supplements/submit', payload);\n      }\n      setSuccess('Supplement submitted for review successfully!');\n      setTimeout(() => {\n        navigate('/dashboard');\n      }, 2000);\n    } catch (err) {\n      var _err$response3, _err$response3$data;\n      console.error('Submit supplement error:', err);\n      setError(((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.error) || 'Error submitting supplement');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const getStepContent = step => {\n    switch (step) {\n      case 0:\n        return /*#__PURE__*/_jsxDEV(BasicInfoStep, {\n          data: formData,\n          updateData: updateFormData,\n          onNext: handleNext\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 11\n        }, this);\n      case 1:\n        return /*#__PURE__*/_jsxDEV(IngredientsStep, {\n          data: formData,\n          updateData: updateFormData,\n          onNext: handleNext,\n          onBack: handleBack\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this);\n      case 2:\n        return /*#__PURE__*/_jsxDEV(HealthClaimsStep, {\n          data: formData,\n          updateData: updateFormData,\n          onNext: handleNext,\n          onBack: handleBack\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }, this);\n      case 3:\n        return /*#__PURE__*/_jsxDEV(DocumentsStep, {\n          data: formData,\n          updateData: updateFormData,\n          onNext: handleNext,\n          onBack: handleBack\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, this);\n      case 4:\n        return /*#__PURE__*/_jsxDEV(ReviewStep, {\n          data: formData,\n          onSubmit: submitForReview,\n          onBack: handleBack,\n          onSaveDraft: saveDraft,\n          loading: loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 11\n        }, this);\n      default:\n        return 'Unknown step';\n    }\n  };\n  if (loading && !formData.artgEntry.productName) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        minHeight: \"400px\",\n        children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"lg\",\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mb: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        gutterBottom: true,\n        children: id && id !== 'new' ? 'Edit Product Submission' : 'New Product Submission'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body1\",\n        color: \"text.secondary\",\n        gutterBottom: true,\n        children: \"Complete all steps to submit your product for OSI certification\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"error\",\n      sx: {\n        mb: 3\n      },\n      onClose: () => setError(''),\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 9\n    }, this), success && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"success\",\n      sx: {\n        mb: 3\n      },\n      onClose: () => setSuccess(''),\n      children: success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Paper, {\n      sx: {\n        p: 3\n      },\n      children: [/*#__PURE__*/_jsxDEV(Stepper, {\n        activeStep: activeStep,\n        sx: {\n          mb: 4\n        },\n        children: steps.map((label, index) => /*#__PURE__*/_jsxDEV(Step, {\n          completed: index < activeStep,\n          children: /*#__PURE__*/_jsxDEV(StepLabel, {\n            onClick: () => handleStepClick(index),\n            sx: {\n              cursor: 'pointer'\n            },\n            children: label\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 15\n          }, this)\n        }, label, false, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          minHeight: '400px'\n        },\n        children: getStepContent(activeStep)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 9\n      }, this), activeStep < steps.length - 1 && /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'center',\n          mt: 3\n        },\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outlined\",\n          onClick: saveDraft,\n          disabled: loading,\n          startIcon: loading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 36\n          }, this) : null,\n          children: \"Save Draft\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 323,\n    columnNumber: 5\n  }, this);\n};\n_s(SupplementForm, \"1YPTv3HOnyeHxRFtcHrJ0HpbZ3c=\", false, function () {\n  return [useParams, useNavigate, useAuth];\n});\n_c = SupplementForm;\nexport default SupplementForm;\nvar _c;\n$RefreshReg$(_c, \"SupplementForm\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Container","Typography","Stepper","Step","StepLabel","Box","Button","Paper","Alert","CircularProgress","useAuth","api","BasicInfoStep","IngredientsStep","HealthClaimsStep","DocumentsStep","ReviewStep","jsxDEV","_jsxDEV","steps","SupplementForm","_s","id","navigate","user","activeStep","setActiveStep","loading","setLoading","error","setError","success","setSuccess","isDraft","setIsDraft","formData","setFormData","artgEntry","artgNumber","productName","alternateNames","sponsor","postalAddress","productCategory","status","products","productType","effectiveDate","Date","toISOString","split","permittedIndications","indicationRequirements","warnings","dosageInformation","adults","children","generalNotes","allergenInformation","containsAllergens","freeOfClaims","allergenStatement","crossContaminationRisk","additionalProductInformation","packSizeInformation","packSize","poisonSchedule","components","formulation","dosageForm","routeOfAdministration","visualIdentification","activeIngredients","excipients","clinicalTrials","evidenceRegulatorySummary","overallEvidenceStatement","keyRegulatoryPoints","evidenceGradingSystemUsed","references","interactions","contraindicationsAdverseEffects","contraindications","adverseEffects","intendedPopulation","primaryTargetGroups","ageRange","minAge","maxAge","unit","sex","specificConsiderations","storageShelfLife","storageConditions","shelfLifeMonths","useByInstructions","batchNumberFormat","expiryDateFormat","productIdentifiers","documentInformation","dataEntrySource","dataEntryDate","version","notes","submissionMetadata","submittedBy","organizationId","lastSaved","submittedAt","loadSupplementData","supplementId","response","get","data","supplement","osi_data","err","_err$response","_err$response$data","console","handleNext","prevActiveStep","handleBack","handleStepClick","step","updateFormData","section","prev","saveDraft","draftData","now","map","w","text","comp","ing","quantity","value","equivalentTo","substance","put","osiData","post","_err$response2","_err$response2$data","submitForReview","payload","setTimeout","_err$response3","_err$response3$data","getStepContent","updateData","onNext","fileName","_jsxFileName","lineNumber","columnNumber","onBack","onSubmit","onSaveDraft","display","justifyContent","alignItems","minHeight","maxWidth","sx","mb","variant","gutterBottom","color","severity","onClose","p","label","index","completed","onClick","cursor","length","mt","disabled","startIcon","size","_c","$RefreshReg$"],"sources":["C:/Users/monty/OneDrive/ドキュメント/OpenSupplementsInitiative/client/src/pages/SupplementForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport {\r\n  Container,\r\n  Typography,\r\n  Stepper,\r\n  Step,\r\n  StepLabel,\r\n  Box,\r\n  Button,\r\n  Paper,\r\n  Alert,\r\n  CircularProgress\r\n} from '@mui/material';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport api from '../utils/api';\r\nimport BasicInfoStep from '../components/submission/BasicInfoStep';\r\nimport IngredientsStep from '../components/submission/IngredientsStep';\r\nimport HealthClaimsStep from '../components/submission/HealthClaimsStep';\r\nimport DocumentsStep from '../components/submission/DocumentsStep';\r\nimport ReviewStep from '../components/submission/ReviewStep';\r\n\r\nconst steps = [\r\n  'Basic Information',\r\n  'Ingredients & Suppliers',\r\n  'Health Claims & Evidence',\r\n  'Supporting Documents',\r\n  'Review & Submit'\r\n];\r\n\r\nconst SupplementForm = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const { user } = useAuth();\r\n  const [activeStep, setActiveStep] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [isDraft, setIsDraft] = useState(true);\r\n\r\n  // Form data state following OSI schema structure\r\n  const [formData, setFormData] = useState({\r\n    // Basic product information\r\n    artgEntry: {\r\n      artgNumber: '',\r\n      productName: '',\r\n      alternateNames: [],\r\n      sponsor: '',\r\n      postalAddress: '',\r\n      productCategory: 'Medicine',\r\n      status: 'Draft'\r\n    },\r\n    products: [{\r\n      productName: '',\r\n      alternateNames: [],\r\n      productType: 'Single Medicine Product',\r\n      effectiveDate: new Date().toISOString().split('T')[0]\r\n    }],\r\n    permittedIndications: [],\r\n    indicationRequirements: [],\r\n    warnings: [],\r\n    dosageInformation: {\r\n      adults: '',\r\n      children: '',\r\n      generalNotes: ''\r\n    },\r\n    allergenInformation: {\r\n      containsAllergens: [],\r\n      freeOfClaims: [],\r\n      allergenStatement: '',\r\n      crossContaminationRisk: null\r\n    },\r\n    additionalProductInformation: {\r\n      packSizeInformation: {\r\n        packSize: '',\r\n        poisonSchedule: ''\r\n      }\r\n    },\r\n    components: [{\r\n      formulation: 'Primary',\r\n      dosageForm: '',\r\n      routeOfAdministration: '',\r\n      visualIdentification: '',\r\n      activeIngredients: [],\r\n      excipients: []\r\n    }],\r\n    clinicalTrials: [],\r\n    evidenceRegulatorySummary: {\r\n      overallEvidenceStatement: '',\r\n      keyRegulatoryPoints: [],\r\n      evidenceGradingSystemUsed: '',\r\n      references: []\r\n    },\r\n    interactions: [],\r\n    contraindicationsAdverseEffects: {\r\n      contraindications: [],\r\n      adverseEffects: []\r\n    },\r\n    intendedPopulation: {\r\n      primaryTargetGroups: [],\r\n      ageRange: {\r\n        minAge: null,\r\n        maxAge: null,\r\n        unit: 'years'\r\n      },\r\n      sex: 'Any',\r\n      specificConsiderations: ''\r\n    },\r\n    storageShelfLife: {\r\n      storageConditions: '',\r\n      shelfLifeMonths: null,\r\n      useByInstructions: '',\r\n      batchNumberFormat: '',\r\n      expiryDateFormat: ''\r\n    },\r\n    productIdentifiers: [],\r\n    documentInformation: {\r\n      dataEntrySource: 'Manufacturer Submission',\r\n      dataEntryDate: new Date().toISOString().split('T')[0],\r\n      version: '0.2.0',\r\n      notes: ''\r\n    },\r\n    // Additional fields for submission tracking\r\n    submissionMetadata: {\r\n      submittedBy: user?.id || '',\r\n      organizationId: user?.organizationId || '',\r\n      status: 'draft',\r\n      lastSaved: null,\r\n      submittedAt: null\r\n    }\r\n  });\r\n\r\n  // Load existing supplement data if editing\r\n  useEffect(() => {\r\n    if (id && id !== 'new') {\r\n      loadSupplementData(id);\r\n    }\r\n  }, [id]);\r\n\r\n  const loadSupplementData = async (supplementId) => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await api.get(`/supplements/${supplementId}`);\r\n      const data = response.data.supplement;\r\n      setFormData(data.osi_data || data);\r\n      setIsDraft(data.status === 'draft');\r\n    } catch (err) {\r\n      console.error('Error loading supplement data:', err);\r\n      setError(err.response?.data?.error || 'Error loading supplement data');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleNext = () => {\r\n    setActiveStep((prevActiveStep) => prevActiveStep + 1);\r\n  };\r\n\r\n  const handleBack = () => {\r\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\r\n  };\r\n\r\n  const handleStepClick = (step) => {\r\n    setActiveStep(step);\r\n  };\r\n\r\n  const updateFormData = (section, data) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [section]: data\r\n    }));\r\n  };\r\n\r\n  const saveDraft = async () => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      // Prepare data for draft submission - make it more lenient\r\n      const draftData = {\r\n        ...formData,\r\n        // Ensure required fields have default values for draft\r\n        artgEntry: {\r\n          ...formData.artgEntry,\r\n          artgNumber: formData.artgEntry.artgNumber || 'DRAFT-' + Date.now(),\r\n          status: 'Draft'\r\n        },\r\n        // Convert warnings objects to strings for schema compliance\r\n        warnings: formData.warnings.map(w => typeof w === 'object' ? w.text : w),\r\n        // Ensure components have proper structure\r\n        components: formData.components.map(comp => ({\r\n          ...comp,\r\n          activeIngredients: comp.activeIngredients.map(ing => ({\r\n            ...ing,\r\n            // Convert quantity object to string for schema compliance\r\n            quantity: typeof ing.quantity === 'object' \r\n              ? `${ing.quantity.value} ${ing.quantity.unit}`\r\n              : ing.quantity,\r\n            // Remove equivalentTo if it's null or empty\r\n            ...(ing.equivalentTo && ing.equivalentTo.substance ? {\r\n              equivalentTo: `${ing.equivalentTo.value} ${ing.equivalentTo.unit} ${ing.equivalentTo.substance}`\r\n            } : {})\r\n          }))\r\n        })),\r\n        submissionMetadata: {\r\n          ...formData.submissionMetadata,\r\n          lastSaved: new Date().toISOString(),\r\n          status: 'draft'\r\n        }\r\n      };\r\n\r\n      let response;\r\n      if (id && id !== 'new') {\r\n        response = await api.put(`/supplements/${id}`, { osiData: draftData });\r\n      } else {\r\n        response = await api.post('/supplements', draftData);\r\n      }\r\n\r\n      setSuccess('Draft saved successfully');\r\n      if (!id || id === 'new') {\r\n        navigate(`/supplement/${response.data.id}/edit`);\r\n      }\r\n    } catch (err) {\r\n      console.error('Save draft error:', err);\r\n      setError(err.response?.data?.error || 'Error saving draft');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const submitForReview = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const payload = {\r\n        ...formData,\r\n        submissionMetadata: {\r\n          ...formData.submissionMetadata,\r\n          submittedAt: new Date().toISOString(),\r\n          status: 'submitted'\r\n        }\r\n      };\r\n\r\n      if (id && id !== 'new') {\r\n        await api.post(`/supplements/${id}/submit`);\r\n      } else {\r\n        await api.post('/supplements/submit', payload);\r\n      }\r\n\r\n      setSuccess('Supplement submitted for review successfully!');\r\n      setTimeout(() => {\r\n        navigate('/dashboard');\r\n      }, 2000);\r\n    } catch (err) {\r\n      console.error('Submit supplement error:', err);\r\n      setError(err.response?.data?.error || 'Error submitting supplement');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getStepContent = (step) => {\r\n    switch (step) {\r\n      case 0:\r\n        return (\r\n          <BasicInfoStep\r\n            data={formData}\r\n            updateData={updateFormData}\r\n            onNext={handleNext}\r\n          />\r\n        );\r\n      case 1:\r\n        return (\r\n          <IngredientsStep\r\n            data={formData}\r\n            updateData={updateFormData}\r\n            onNext={handleNext}\r\n            onBack={handleBack}\r\n          />\r\n        );\r\n      case 2:\r\n        return (\r\n          <HealthClaimsStep\r\n            data={formData}\r\n            updateData={updateFormData}\r\n            onNext={handleNext}\r\n            onBack={handleBack}\r\n          />\r\n        );\r\n      case 3:\r\n        return (\r\n          <DocumentsStep\r\n            data={formData}\r\n            updateData={updateFormData}\r\n            onNext={handleNext}\r\n            onBack={handleBack}\r\n          />\r\n        );\r\n      case 4:\r\n        return (\r\n          <ReviewStep\r\n            data={formData}\r\n            onSubmit={submitForReview}\r\n            onBack={handleBack}\r\n            onSaveDraft={saveDraft}\r\n            loading={loading}\r\n          />\r\n        );\r\n      default:\r\n        return 'Unknown step';\r\n    }\r\n  };\r\n\r\n  if (loading && !formData.artgEntry.productName) {\r\n    return (\r\n      <Container>\r\n        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"400px\">\r\n          <CircularProgress />\r\n        </Box>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container maxWidth=\"lg\">\r\n      <Box sx={{ mb: 4 }}>\r\n        <Typography variant=\"h4\" gutterBottom>\r\n          {id && id !== 'new' ? 'Edit Product Submission' : 'New Product Submission'}\r\n        </Typography>\r\n        <Typography variant=\"body1\" color=\"text.secondary\" gutterBottom>\r\n          Complete all steps to submit your product for OSI certification\r\n        </Typography>\r\n      </Box>\r\n\r\n      {error && (\r\n        <Alert severity=\"error\" sx={{ mb: 3 }} onClose={() => setError('')}>\r\n          {error}\r\n        </Alert>\r\n      )}\r\n\r\n      {success && (\r\n        <Alert severity=\"success\" sx={{ mb: 3 }} onClose={() => setSuccess('')}>\r\n          {success}\r\n        </Alert>\r\n      )}\r\n\r\n      <Paper sx={{ p: 3 }}>\r\n        <Stepper activeStep={activeStep} sx={{ mb: 4 }}>\r\n          {steps.map((label, index) => (\r\n            <Step key={label} completed={index < activeStep}>\r\n              <StepLabel \r\n                onClick={() => handleStepClick(index)}\r\n                sx={{ cursor: 'pointer' }}\r\n              >\r\n                {label}\r\n              </StepLabel>\r\n            </Step>\r\n          ))}\r\n        </Stepper>\r\n\r\n        <Box sx={{ minHeight: '400px' }}>\r\n          {getStepContent(activeStep)}\r\n        </Box>\r\n\r\n        {/* Save Draft Button - Available on all steps except final review */}\r\n        {activeStep < steps.length - 1 && (\r\n          <Box sx={{ display: 'flex', justifyContent: 'center', mt: 3 }}>\r\n            <Button\r\n              variant=\"outlined\"\r\n              onClick={saveDraft}\r\n              disabled={loading}\r\n              startIcon={loading ? <CircularProgress size={20} /> : null}\r\n            >\r\n              Save Draft\r\n            </Button>\r\n          </Box>\r\n        )}\r\n      </Paper>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default SupplementForm;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,SAAS,EAAEC,WAAW,QAAQ,kBAAkB;AACzD,SACEC,SAAS,EACTC,UAAU,EACVC,OAAO,EACPC,IAAI,EACJC,SAAS,EACTC,GAAG,EACHC,MAAM,EACNC,KAAK,EACLC,KAAK,EACLC,gBAAgB,QACX,eAAe;AACtB,SAASC,OAAO,QAAQ,yBAAyB;AACjD,OAAOC,GAAG,MAAM,cAAc;AAC9B,OAAOC,aAAa,MAAM,wCAAwC;AAClE,OAAOC,eAAe,MAAM,0CAA0C;AACtE,OAAOC,gBAAgB,MAAM,2CAA2C;AACxE,OAAOC,aAAa,MAAM,wCAAwC;AAClE,OAAOC,UAAU,MAAM,qCAAqC;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE7D,MAAMC,KAAK,GAAG,CACZ,mBAAmB,EACnB,yBAAyB,EACzB,0BAA0B,EAC1B,sBAAsB,EACtB,iBAAiB,CAClB;AAED,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3B,MAAM;IAAEC;EAAG,CAAC,GAAGxB,SAAS,CAAC,CAAC;EAC1B,MAAMyB,QAAQ,GAAGxB,WAAW,CAAC,CAAC;EAC9B,MAAM;IAAEyB;EAAK,CAAC,GAAGd,OAAO,CAAC,CAAC;EAC1B,MAAM,CAACe,UAAU,EAAEC,aAAa,CAAC,GAAG9B,QAAQ,CAAC,CAAC,CAAC;EAC/C,MAAM,CAAC+B,OAAO,EAAEC,UAAU,CAAC,GAAGhC,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACiC,KAAK,EAAEC,QAAQ,CAAC,GAAGlC,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACmC,OAAO,EAAEC,UAAU,CAAC,GAAGpC,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACqC,OAAO,EAAEC,UAAU,CAAC,GAAGtC,QAAQ,CAAC,IAAI,CAAC;;EAE5C;EACA,MAAM,CAACuC,QAAQ,EAAEC,WAAW,CAAC,GAAGxC,QAAQ,CAAC;IACvC;IACAyC,SAAS,EAAE;MACTC,UAAU,EAAE,EAAE;MACdC,WAAW,EAAE,EAAE;MACfC,cAAc,EAAE,EAAE;MAClBC,OAAO,EAAE,EAAE;MACXC,aAAa,EAAE,EAAE;MACjBC,eAAe,EAAE,UAAU;MAC3BC,MAAM,EAAE;IACV,CAAC;IACDC,QAAQ,EAAE,CAAC;MACTN,WAAW,EAAE,EAAE;MACfC,cAAc,EAAE,EAAE;MAClBM,WAAW,EAAE,yBAAyB;MACtCC,aAAa,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;IACtD,CAAC,CAAC;IACFC,oBAAoB,EAAE,EAAE;IACxBC,sBAAsB,EAAE,EAAE;IAC1BC,QAAQ,EAAE,EAAE;IACZC,iBAAiB,EAAE;MACjBC,MAAM,EAAE,EAAE;MACVC,QAAQ,EAAE,EAAE;MACZC,YAAY,EAAE;IAChB,CAAC;IACDC,mBAAmB,EAAE;MACnBC,iBAAiB,EAAE,EAAE;MACrBC,YAAY,EAAE,EAAE;MAChBC,iBAAiB,EAAE,EAAE;MACrBC,sBAAsB,EAAE;IAC1B,CAAC;IACDC,4BAA4B,EAAE;MAC5BC,mBAAmB,EAAE;QACnBC,QAAQ,EAAE,EAAE;QACZC,cAAc,EAAE;MAClB;IACF,CAAC;IACDC,UAAU,EAAE,CAAC;MACXC,WAAW,EAAE,SAAS;MACtBC,UAAU,EAAE,EAAE;MACdC,qBAAqB,EAAE,EAAE;MACzBC,oBAAoB,EAAE,EAAE;MACxBC,iBAAiB,EAAE,EAAE;MACrBC,UAAU,EAAE;IACd,CAAC,CAAC;IACFC,cAAc,EAAE,EAAE;IAClBC,yBAAyB,EAAE;MACzBC,wBAAwB,EAAE,EAAE;MAC5BC,mBAAmB,EAAE,EAAE;MACvBC,yBAAyB,EAAE,EAAE;MAC7BC,UAAU,EAAE;IACd,CAAC;IACDC,YAAY,EAAE,EAAE;IAChBC,+BAA+B,EAAE;MAC/BC,iBAAiB,EAAE,EAAE;MACrBC,cAAc,EAAE;IAClB,CAAC;IACDC,kBAAkB,EAAE;MAClBC,mBAAmB,EAAE,EAAE;MACvBC,QAAQ,EAAE;QACRC,MAAM,EAAE,IAAI;QACZC,MAAM,EAAE,IAAI;QACZC,IAAI,EAAE;MACR,CAAC;MACDC,GAAG,EAAE,KAAK;MACVC,sBAAsB,EAAE;IAC1B,CAAC;IACDC,gBAAgB,EAAE;MAChBC,iBAAiB,EAAE,EAAE;MACrBC,eAAe,EAAE,IAAI;MACrBC,iBAAiB,EAAE,EAAE;MACrBC,iBAAiB,EAAE,EAAE;MACrBC,gBAAgB,EAAE;IACpB,CAAC;IACDC,kBAAkB,EAAE,EAAE;IACtBC,mBAAmB,EAAE;MACnBC,eAAe,EAAE,yBAAyB;MAC1CC,aAAa,EAAE,IAAIrD,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;MACrDoD,OAAO,EAAE,OAAO;MAChBC,KAAK,EAAE;IACT,CAAC;IACD;IACAC,kBAAkB,EAAE;MAClBC,WAAW,EAAE,CAAAjF,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEF,EAAE,KAAI,EAAE;MAC3BoF,cAAc,EAAE,CAAAlF,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEkF,cAAc,KAAI,EAAE;MAC1C9D,MAAM,EAAE,OAAO;MACf+D,SAAS,EAAE,IAAI;MACfC,WAAW,EAAE;IACf;EACF,CAAC,CAAC;;EAEF;EACA/G,SAAS,CAAC,MAAM;IACd,IAAIyB,EAAE,IAAIA,EAAE,KAAK,KAAK,EAAE;MACtBuF,kBAAkB,CAACvF,EAAE,CAAC;IACxB;EACF,CAAC,EAAE,CAACA,EAAE,CAAC,CAAC;EAER,MAAMuF,kBAAkB,GAAG,MAAOC,YAAY,IAAK;IACjD,IAAI;MACFlF,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMmF,QAAQ,GAAG,MAAMpG,GAAG,CAACqG,GAAG,CAAC,gBAAgBF,YAAY,EAAE,CAAC;MAC9D,MAAMG,IAAI,GAAGF,QAAQ,CAACE,IAAI,CAACC,UAAU;MACrC9E,WAAW,CAAC6E,IAAI,CAACE,QAAQ,IAAIF,IAAI,CAAC;MAClC/E,UAAU,CAAC+E,IAAI,CAACrE,MAAM,KAAK,OAAO,CAAC;IACrC,CAAC,CAAC,OAAOwE,GAAG,EAAE;MAAA,IAAAC,aAAA,EAAAC,kBAAA;MACZC,OAAO,CAAC1F,KAAK,CAAC,gCAAgC,EAAEuF,GAAG,CAAC;MACpDtF,QAAQ,CAAC,EAAAuF,aAAA,GAAAD,GAAG,CAACL,QAAQ,cAAAM,aAAA,wBAAAC,kBAAA,GAAZD,aAAA,CAAcJ,IAAI,cAAAK,kBAAA,uBAAlBA,kBAAA,CAAoBzF,KAAK,KAAI,+BAA+B,CAAC;IACxE,CAAC,SAAS;MACRD,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAM4F,UAAU,GAAGA,CAAA,KAAM;IACvB9F,aAAa,CAAE+F,cAAc,IAAKA,cAAc,GAAG,CAAC,CAAC;EACvD,CAAC;EAED,MAAMC,UAAU,GAAGA,CAAA,KAAM;IACvBhG,aAAa,CAAE+F,cAAc,IAAKA,cAAc,GAAG,CAAC,CAAC;EACvD,CAAC;EAED,MAAME,eAAe,GAAIC,IAAI,IAAK;IAChClG,aAAa,CAACkG,IAAI,CAAC;EACrB,CAAC;EAED,MAAMC,cAAc,GAAGA,CAACC,OAAO,EAAEb,IAAI,KAAK;IACxC7E,WAAW,CAAC2F,IAAI,KAAK;MACnB,GAAGA,IAAI;MACP,CAACD,OAAO,GAAGb;IACb,CAAC,CAAC,CAAC;EACL,CAAC;EAED,MAAMe,SAAS,GAAG,MAAAA,CAAA,KAAY;IAC5B,IAAI;MACFpG,UAAU,CAAC,IAAI,CAAC;;MAEhB;MACA,MAAMqG,SAAS,GAAG;QAChB,GAAG9F,QAAQ;QACX;QACAE,SAAS,EAAE;UACT,GAAGF,QAAQ,CAACE,SAAS;UACrBC,UAAU,EAAEH,QAAQ,CAACE,SAAS,CAACC,UAAU,IAAI,QAAQ,GAAGU,IAAI,CAACkF,GAAG,CAAC,CAAC;UAClEtF,MAAM,EAAE;QACV,CAAC;QACD;QACAS,QAAQ,EAAElB,QAAQ,CAACkB,QAAQ,CAAC8E,GAAG,CAACC,CAAC,IAAI,OAAOA,CAAC,KAAK,QAAQ,GAAGA,CAAC,CAACC,IAAI,GAAGD,CAAC,CAAC;QACxE;QACAjE,UAAU,EAAEhC,QAAQ,CAACgC,UAAU,CAACgE,GAAG,CAACG,IAAI,KAAK;UAC3C,GAAGA,IAAI;UACP9D,iBAAiB,EAAE8D,IAAI,CAAC9D,iBAAiB,CAAC2D,GAAG,CAACI,GAAG,KAAK;YACpD,GAAGA,GAAG;YACN;YACAC,QAAQ,EAAE,OAAOD,GAAG,CAACC,QAAQ,KAAK,QAAQ,GACtC,GAAGD,GAAG,CAACC,QAAQ,CAACC,KAAK,IAAIF,GAAG,CAACC,QAAQ,CAAC/C,IAAI,EAAE,GAC5C8C,GAAG,CAACC,QAAQ;YAChB;YACA,IAAID,GAAG,CAACG,YAAY,IAAIH,GAAG,CAACG,YAAY,CAACC,SAAS,GAAG;cACnDD,YAAY,EAAE,GAAGH,GAAG,CAACG,YAAY,CAACD,KAAK,IAAIF,GAAG,CAACG,YAAY,CAACjD,IAAI,IAAI8C,GAAG,CAACG,YAAY,CAACC,SAAS;YAChG,CAAC,GAAG,CAAC,CAAC;UACR,CAAC,CAAC;QACJ,CAAC,CAAC,CAAC;QACHnC,kBAAkB,EAAE;UAClB,GAAGrE,QAAQ,CAACqE,kBAAkB;UAC9BG,SAAS,EAAE,IAAI3D,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;UACnCL,MAAM,EAAE;QACV;MACF,CAAC;MAED,IAAImE,QAAQ;MACZ,IAAIzF,EAAE,IAAIA,EAAE,KAAK,KAAK,EAAE;QACtByF,QAAQ,GAAG,MAAMpG,GAAG,CAACiI,GAAG,CAAC,gBAAgBtH,EAAE,EAAE,EAAE;UAAEuH,OAAO,EAAEZ;QAAU,CAAC,CAAC;MACxE,CAAC,MAAM;QACLlB,QAAQ,GAAG,MAAMpG,GAAG,CAACmI,IAAI,CAAC,cAAc,EAAEb,SAAS,CAAC;MACtD;MAEAjG,UAAU,CAAC,0BAA0B,CAAC;MACtC,IAAI,CAACV,EAAE,IAAIA,EAAE,KAAK,KAAK,EAAE;QACvBC,QAAQ,CAAC,eAAewF,QAAQ,CAACE,IAAI,CAAC3F,EAAE,OAAO,CAAC;MAClD;IACF,CAAC,CAAC,OAAO8F,GAAG,EAAE;MAAA,IAAA2B,cAAA,EAAAC,mBAAA;MACZzB,OAAO,CAAC1F,KAAK,CAAC,mBAAmB,EAAEuF,GAAG,CAAC;MACvCtF,QAAQ,CAAC,EAAAiH,cAAA,GAAA3B,GAAG,CAACL,QAAQ,cAAAgC,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAc9B,IAAI,cAAA+B,mBAAA,uBAAlBA,mBAAA,CAAoBnH,KAAK,KAAI,oBAAoB,CAAC;IAC7D,CAAC,SAAS;MACRD,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAMqH,eAAe,GAAG,MAAAA,CAAA,KAAY;IAClC,IAAI;MACFrH,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMsH,OAAO,GAAG;QACd,GAAG/G,QAAQ;QACXqE,kBAAkB,EAAE;UAClB,GAAGrE,QAAQ,CAACqE,kBAAkB;UAC9BI,WAAW,EAAE,IAAI5D,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;UACrCL,MAAM,EAAE;QACV;MACF,CAAC;MAED,IAAItB,EAAE,IAAIA,EAAE,KAAK,KAAK,EAAE;QACtB,MAAMX,GAAG,CAACmI,IAAI,CAAC,gBAAgBxH,EAAE,SAAS,CAAC;MAC7C,CAAC,MAAM;QACL,MAAMX,GAAG,CAACmI,IAAI,CAAC,qBAAqB,EAAEI,OAAO,CAAC;MAChD;MAEAlH,UAAU,CAAC,+CAA+C,CAAC;MAC3DmH,UAAU,CAAC,MAAM;QACf5H,QAAQ,CAAC,YAAY,CAAC;MACxB,CAAC,EAAE,IAAI,CAAC;IACV,CAAC,CAAC,OAAO6F,GAAG,EAAE;MAAA,IAAAgC,cAAA,EAAAC,mBAAA;MACZ9B,OAAO,CAAC1F,KAAK,CAAC,0BAA0B,EAAEuF,GAAG,CAAC;MAC9CtF,QAAQ,CAAC,EAAAsH,cAAA,GAAAhC,GAAG,CAACL,QAAQ,cAAAqC,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAcnC,IAAI,cAAAoC,mBAAA,uBAAlBA,mBAAA,CAAoBxH,KAAK,KAAI,6BAA6B,CAAC;IACtE,CAAC,SAAS;MACRD,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAM0H,cAAc,GAAI1B,IAAI,IAAK;IAC/B,QAAQA,IAAI;MACV,KAAK,CAAC;QACJ,oBACE1G,OAAA,CAACN,aAAa;UACZqG,IAAI,EAAE9E,QAAS;UACfoH,UAAU,EAAE1B,cAAe;UAC3B2B,MAAM,EAAEhC;QAAW;UAAAiC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACpB,CAAC;MAEN,KAAK,CAAC;QACJ,oBACE1I,OAAA,CAACL,eAAe;UACdoG,IAAI,EAAE9E,QAAS;UACfoH,UAAU,EAAE1B,cAAe;UAC3B2B,MAAM,EAAEhC,UAAW;UACnBqC,MAAM,EAAEnC;QAAW;UAAA+B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACpB,CAAC;MAEN,KAAK,CAAC;QACJ,oBACE1I,OAAA,CAACJ,gBAAgB;UACfmG,IAAI,EAAE9E,QAAS;UACfoH,UAAU,EAAE1B,cAAe;UAC3B2B,MAAM,EAAEhC,UAAW;UACnBqC,MAAM,EAAEnC;QAAW;UAAA+B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACpB,CAAC;MAEN,KAAK,CAAC;QACJ,oBACE1I,OAAA,CAACH,aAAa;UACZkG,IAAI,EAAE9E,QAAS;UACfoH,UAAU,EAAE1B,cAAe;UAC3B2B,MAAM,EAAEhC,UAAW;UACnBqC,MAAM,EAAEnC;QAAW;UAAA+B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACpB,CAAC;MAEN,KAAK,CAAC;QACJ,oBACE1I,OAAA,CAACF,UAAU;UACTiG,IAAI,EAAE9E,QAAS;UACf2H,QAAQ,EAAEb,eAAgB;UAC1BY,MAAM,EAAEnC,UAAW;UACnBqC,WAAW,EAAE/B,SAAU;UACvBrG,OAAO,EAAEA;QAAQ;UAAA8H,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAClB,CAAC;MAEN;QACE,OAAO,cAAc;IACzB;EACF,CAAC;EAED,IAAIjI,OAAO,IAAI,CAACQ,QAAQ,CAACE,SAAS,CAACE,WAAW,EAAE;IAC9C,oBACErB,OAAA,CAAClB,SAAS;MAAAwD,QAAA,eACRtC,OAAA,CAACb,GAAG;QAAC2J,OAAO,EAAC,MAAM;QAACC,cAAc,EAAC,QAAQ;QAACC,UAAU,EAAC,QAAQ;QAACC,SAAS,EAAC,OAAO;QAAA3G,QAAA,eAC/EtC,OAAA,CAACT,gBAAgB;UAAAgJ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACjB;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACG,CAAC;EAEhB;EAEA,oBACE1I,OAAA,CAAClB,SAAS;IAACoK,QAAQ,EAAC,IAAI;IAAA5G,QAAA,gBACtBtC,OAAA,CAACb,GAAG;MAACgK,EAAE,EAAE;QAAEC,EAAE,EAAE;MAAE,CAAE;MAAA9G,QAAA,gBACjBtC,OAAA,CAACjB,UAAU;QAACsK,OAAO,EAAC,IAAI;QAACC,YAAY;QAAAhH,QAAA,EAClClC,EAAE,IAAIA,EAAE,KAAK,KAAK,GAAG,yBAAyB,GAAG;MAAwB;QAAAmI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAChE,CAAC,eACb1I,OAAA,CAACjB,UAAU;QAACsK,OAAO,EAAC,OAAO;QAACE,KAAK,EAAC,gBAAgB;QAACD,YAAY;QAAAhH,QAAA,EAAC;MAEhE;QAAAiG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAY,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV,CAAC,EAEL/H,KAAK,iBACJX,OAAA,CAACV,KAAK;MAACkK,QAAQ,EAAC,OAAO;MAACL,EAAE,EAAE;QAAEC,EAAE,EAAE;MAAE,CAAE;MAACK,OAAO,EAAEA,CAAA,KAAM7I,QAAQ,CAAC,EAAE,CAAE;MAAA0B,QAAA,EAChE3B;IAAK;MAAA4H,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACD,CACR,EAEA7H,OAAO,iBACNb,OAAA,CAACV,KAAK;MAACkK,QAAQ,EAAC,SAAS;MAACL,EAAE,EAAE;QAAEC,EAAE,EAAE;MAAE,CAAE;MAACK,OAAO,EAAEA,CAAA,KAAM3I,UAAU,CAAC,EAAE,CAAE;MAAAwB,QAAA,EACpEzB;IAAO;MAAA0H,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACR,eAED1I,OAAA,CAACX,KAAK;MAAC8J,EAAE,EAAE;QAAEO,CAAC,EAAE;MAAE,CAAE;MAAApH,QAAA,gBAClBtC,OAAA,CAAChB,OAAO;QAACuB,UAAU,EAAEA,UAAW;QAAC4I,EAAE,EAAE;UAAEC,EAAE,EAAE;QAAE,CAAE;QAAA9G,QAAA,EAC5CrC,KAAK,CAACgH,GAAG,CAAC,CAAC0C,KAAK,EAAEC,KAAK,kBACtB5J,OAAA,CAACf,IAAI;UAAa4K,SAAS,EAAED,KAAK,GAAGrJ,UAAW;UAAA+B,QAAA,eAC9CtC,OAAA,CAACd,SAAS;YACR4K,OAAO,EAAEA,CAAA,KAAMrD,eAAe,CAACmD,KAAK,CAAE;YACtCT,EAAE,EAAE;cAAEY,MAAM,EAAE;YAAU,CAAE;YAAAzH,QAAA,EAEzBqH;UAAK;YAAApB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACG;QAAC,GANHiB,KAAK;UAAApB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAOV,CACP;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACK,CAAC,eAEV1I,OAAA,CAACb,GAAG;QAACgK,EAAE,EAAE;UAAEF,SAAS,EAAE;QAAQ,CAAE;QAAA3G,QAAA,EAC7B8F,cAAc,CAAC7H,UAAU;MAAC;QAAAgI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxB,CAAC,EAGLnI,UAAU,GAAGN,KAAK,CAAC+J,MAAM,GAAG,CAAC,iBAC5BhK,OAAA,CAACb,GAAG;QAACgK,EAAE,EAAE;UAAEL,OAAO,EAAE,MAAM;UAAEC,cAAc,EAAE,QAAQ;UAAEkB,EAAE,EAAE;QAAE,CAAE;QAAA3H,QAAA,eAC5DtC,OAAA,CAACZ,MAAM;UACLiK,OAAO,EAAC,UAAU;UAClBS,OAAO,EAAEhD,SAAU;UACnBoD,QAAQ,EAAEzJ,OAAQ;UAClB0J,SAAS,EAAE1J,OAAO,gBAAGT,OAAA,CAACT,gBAAgB;YAAC6K,IAAI,EAAE;UAAG;YAAA7B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,GAAG,IAAK;UAAApG,QAAA,EAC5D;QAED;UAAAiG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACI,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEhB,CAAC;AAACvI,EAAA,CA5VID,cAAc;EAAA,QACHtB,SAAS,EACPC,WAAW,EACXW,OAAO;AAAA;AAAA6K,EAAA,GAHpBnK,cAAc;AA8VpB,eAAeA,cAAc;AAAC,IAAAmK,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}